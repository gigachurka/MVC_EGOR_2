@model List<MVC_EGOR_2.Models.Player>

<h2>Игроки клуба</h2>
<table>
    <thead>
        <tr>
            <th>Player ID</th>
            <th>Имя</th>
            <th>Позиция</th>
            <th>Действия</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var player in Model)
        {
            <tr>
                <td>@player.PlayerID</td>
                <td>
                    <input type="text" value="@player.Name" data-player-id="@player.PlayerID" class="name-input" />
                </td>
                <td>
                    <input type="text" value="@player.Position" data-player-id="@player.PlayerID" class="position-input" />
                </td>
                <td>
                    <button class="save-button">Сохранить</button>
                </td>
            </tr>
        }
    </tbody>
</table>

<script>
    document.querySelectorAll(".save-button").forEach(button => {
        button.addEventListener("click", function () {
            const row = this.closest("tr");
            const playerId = row.querySelector(".name-input").dataset.playerId;
            const name = row.querySelector(".name-input").value;
            const position = row.querySelector(".position-input").value;

            fetch('/Clubs/EditPlayer', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ playerId, name, position })
            }).then(response => response.json())
              .then(data => {
                  if (data.success) {
                      alert("Изменения сохранены!");
                  }
              });
        });
    });
</script>
